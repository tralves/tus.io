{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../assets/javascripts/upload-demo.js","webpack:///../assets/javascripts/request-viewer.js","webpack:///../assets/app.js","webpack:///../assets/javascripts/app.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ago","require","tus","container","document","querySelector","alertBox","drawFileInput","innerHTML","input","addEventListener","file","files","console","log","options","endpoint","metadata","filename","filetype","type","drawPreviousUploadSelect","Upload","error","upload","findPreviousUploads","previousUploads","threeHoursAgo","Date","now","map","creationTime","filter","sort","a","b","drawUploadControls","time","buttons","querySelectorAll","Array","from","forEach","button","event","target","getAttribute","index","parseInt","isNaN","resumeFromPreviousUpload","progress","progressBar","pauseButton","textProgress","textHeading","isUploadRunning","abort","textContent","classList","add","start","remove","onError","originalRequest","confirm","alert","onProgress","bytesUploaded","bytesTotal","percentage","toFixed","style","width","formatBytes","onSuccess","url","size","preventDefault","drawDownloadLink","bytes","decimals","k","dm","sizes","Math","floor","parseFloat","pow","isSupported","RESPONSE_HEADERS","xhrOpen","XMLHttpRequest","open","xhrSetRequestHeader","setRequestHeader","xhrSend","send","method","this","_requestDetails","id","round","random","toUpperCase","headers","bodySize","isTusRequest","args","toLowerCase","req","xhr","res","_responseDetails","status","statusText","getResponseHeader","$","html","toLocaleTimeString","join","append","jQuery","Tus","$toggler","$navContainer","click","toggleClass","hasClass","removeClass","ready","navToggler","onthegithubs","Prism","highlightAll"],"mappings":"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","file":"app.88504733603be2f93775.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/build/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([4,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","'use strict'\n\nconst ago = require('s-ago')\nconst tus = require('tus-js-client')\n\nconst container = document.querySelector('#js-upload-container')\nconst alertBox  = document.querySelector('#js-support-alert')\n\nif (!tus.isSupported) {\n  alertBox.classList.remove('hidden')\n}\n\n/**\n * Fill the container with a file input element.\n */\nfunction drawFileInput () {\n  container.innerHTML = `\n    <div class=\"heading\">Select a file you want to upload:</div>\n    <input type=\"file\" id=\"js-file-input\" />\n  `\n\n  const input = container.querySelector('#js-file-input')\n  input.addEventListener('change', () => {\n    const file = input.files[0]\n    // Only continue if a file has actually been selected.\n    // IE will trigger a change event even if we reset the input element\n    // using reset() and we do not want to blow up later.\n    if (!file) {\n      return\n    }\n\n    console.log('demo: selected file', file)\n\n    const options = {\n      endpoint: 'https://master.tus.io/files/',\n      metadata: {\n        filename: file.name,\n        filetype: file.type,\n      },\n    }\n\n    const upload = new tus.Upload(file, options)\n    drawPreviousUploadSelect(upload).catch((error) => {\n      console.error(error)\n    })\n  })\n}\n\n/**\n * Fill the container with buttons to select if an upload should be resumed\n */\nasync function drawPreviousUploadSelect (upload) {\n  let previousUploads = await upload.findPreviousUploads()\n\n  // We only want to consider uploads that were started within the last three hours.\n  const threeHoursAgo = Date.now() - 3 * 60 * 60 * 1000\n  previousUploads = previousUploads\n    .map((upload) => {\n      upload.creationTime = new Date(upload.creationTime)\n      return upload\n    })\n    .filter(upload => upload.creationTime > threeHoursAgo)\n    .sort((a, b) => b.creationTime - a.creationTime)\n\n  // If no upload was previously started, we can directly start the upload.\n  if (previousUploads.length === 0) {\n    return drawUploadControls(upload)\n  }\n\n  const time = ago(previousUploads[0].creationTime)\n  container.innerHTML = `\n    <div class=\"heading\">You already started uploading this file ${time}. Do you want to resume this upload?</div>\n    <button data-resume=\"0\" class=\"button button-primary\">Yes, resume</button>\n    <button data-resume=\"false\">No, start over</button>\n  `\n\n  // The code is also able to deal with multiple options here, but we don't\n  // use it at the moment.\n  const buttons = container.querySelectorAll('button[data-resume]')\n  Array.from(buttons).forEach((button) => {\n    button.addEventListener('click', (event) => {\n      const value = event.target.getAttribute('data-resume')\n      const index = parseInt(value, 10)\n      if (!isNaN(index)) {\n        upload.resumeFromPreviousUpload(previousUploads[index])\n      }\n\n      drawUploadControls(upload)\n    })\n  })\n}\n\n/**\n * Fill the container with a progress bar and a pause/unpause button.\n */\nfunction drawUploadControls (upload) {\n  container.innerHTML = `\n    <div class=\"heading\">The upload is running:</div>\n    <div class=\"upload-row\">\n      <div class=\"progress indeterminate\">\n        <div class=\"progress-bar\"></div>\n      </div>\n      <button id=\"js-upload-toggle\">Pause</button>\n    </div>\n    <div class=\"upload-text-progress\" id=\"js-upload-text-progress\"></div>\n  `\n\n  const progress      = container.querySelector('.progress')\n  const progressBar   = container.querySelector('.progress-bar')\n  const pauseButton   = container.querySelector('#js-upload-toggle')\n  const textProgress  = container.querySelector('#js-upload-text-progress')\n  const textHeading   = container.querySelector('.heading')\n  let isUploadRunning = true\n\n  pauseButton.addEventListener('click', () => {\n    if (isUploadRunning) {\n      upload.abort()\n      isUploadRunning = false\n      pauseButton.textContent = 'Resume'\n      textHeading.textContent = 'The upload is paused:'\n      progress.classList.add('paused')\n    } else {\n      upload.start()\n      isUploadRunning = true\n      pauseButton.textContent = 'Pause'\n      textHeading.textContent = 'The upload is running:'\n      progress.classList.remove('paused')\n    }\n  })\n\n  upload.options.onError = (error) => {\n    console.log('demo: error', error)\n\n    if (error.originalRequest) {\n      if (window.confirm('Failed because: ' + error + '\\nDo you want to retry?')) {\n        upload.start()\n        return\n      }\n    } else {\n      window.alert('Failed because: ' + error)\n    }\n\n    drawFileInput()\n  }\n\n  upload.options.onProgress = (bytesUploaded, bytesTotal) => {\n    const percentage = (bytesUploaded / bytesTotal * 100).toFixed(2) + '%'\n    progress.classList.remove('indeterminate')\n    progressBar.style.width = percentage\n    console.log('demo: progress', bytesUploaded, bytesTotal, percentage)\n    textProgress.textContent = `Uploaded ${formatBytes(bytesUploaded)} of ${formatBytes(bytesTotal)} (${percentage})`\n  }\n\n  upload.options.onSuccess = () => {\n    drawDownloadLink(upload)\n  }\n\n  upload.start()\n}\n\n/**\n * Fill the container with a download link after the upload is finished.\n */\nfunction drawDownloadLink (upload) {\n  container.innerHTML = `\n    <div class=\"heading\">The upload is complete!</div>\n\n    <a href=\"${upload.url}\" target=\"_blank\" class=\"button button-primary\">\n      Download ${upload.file.name} (${formatBytes(upload.file.size)})\n    </a>\n    <br />\n    or\n    <a href=\"#\" id=\"js-reset-demo\">Upload another file</a>\n  `\n\n  const resetButton = container.querySelector('#js-reset-demo')\n  resetButton.addEventListener('click', (event) => {\n    event.preventDefault()\n    drawFileInput()\n  })\n}\n\n/**\n * Turn a byte number into a human readable format.\n * Taken from https://stackoverflow.com/a/18650828\n */\nfunction formatBytes (bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n}\n\nif (container) {\n  drawFileInput()\n} else {\n  console.log('demo: Container not found on this page. Aborting upload-demo.js')\n}\n","const RESPONSE_HEADERS = [\n  'Location',\n  'Tus-Resumable',\n  'Upload-Offset',\n  'Upload-Length',\n  'Upload-Metadata',\n]\n\nconst xhrOpen = XMLHttpRequest.prototype.open\nconst xhrSetRequestHeader = XMLHttpRequest.prototype.setRequestHeader\nconst xhrSend = XMLHttpRequest.prototype.send\n\nXMLHttpRequest.prototype.open = function (method, url, ...args) {\n  this._requestDetails = {\n    id          : Math.round(Math.random() * 1e9),\n    method      : method.toUpperCase(),\n    url         : url,\n    headers     : [],\n    time        : null,\n    bodySize    : null,\n    isTusRequest: false,\n  }\n  xhrOpen.apply(this, [method, url, ...args])\n}\n\nXMLHttpRequest.prototype.setRequestHeader = function (name, value) {\n  if (name.toLowerCase() === 'tus-resumable') {\n    this._requestDetails.isTusRequest = true\n  }\n\n  this._requestDetails.headers.push(`${name}: ${value}`)\n  xhrSetRequestHeader.call(this, name, value)\n}\n\nXMLHttpRequest.prototype.send = function (data) {\n  if (!this._requestDetails.isTusRequest) {\n    xhrSend.call(this, data)\n    return\n  }\n\n  if (data !== null) {\n    this._requestDetails.bodySize = data.size\n  }\n  this._requestDetails.time = new Date()\n\n  this.addEventListener('load', () => {\n    this._responseDetails = {\n      status : this.status + ' ' + this.statusText,\n      headers: [],\n      time   : new Date(),\n    }\n\n    RESPONSE_HEADERS.forEach((name) => {\n      const value = this.getResponseHeader(name)\n      if (value !== null) {\n        this._responseDetails.headers.push(`${name}: ${value}`)\n      }\n    })\n\n    onResponseIncoming(this)\n  })\n\n  xhrSend.call(this, data)\n  onRequestOutgoing(this)\n}\n\nfunction onRequestOutgoing (xhr) {\n  const req = xhr._requestDetails\n\n  $('.http-traffic-list').append(`\n  <div class=\"http-element\" data-request-id=\"${req.id}\">\n    <div class=\"http-method-url\"><span class=\"http-method\">${req.method}</span> ${req.url}</div>\n    <div class=\"http-block\">\n      <div class=\"http-desc\"><b>Request</b> (sent at ${req.time.toLocaleTimeString()})</div>\n      <div class=\"http-paragraph\">\n        ${req.headers.join('<br />')}\n        <br />\n        ${req.bodySize ? `[Binary body with ${req.bodySize} bytes]` : '[No body sent]'}\n      </div>\n    </div>\n    <div class=\"http-block http-response\">\n      <div class=\"http-desc\"><b>Response</b> (not yet received)</div>\n    </div>\n  </div>\n  `)\n}\n\nfunction onResponseIncoming (xhr) {\n  const req = xhr._requestDetails\n  const res = xhr._responseDetails\n\n  $(`.http-element[data-request-id=${req.id}] .http-response`).html(`\n  <div class=\"http-desc\"><b>Response</b> (received at ${res.time.toLocaleTimeString()})</div>\n  <div class=\"http-paragraph\">\n    ${res.status}<br />\n    ${res.headers.join('<br />')}\n  </div>\n  `)\n}\n\n$(() => {\n\n})\n","var $ = require('jquery')\nwindow.jQuery = $\nwindow.$ = $\n\nrequire('./javascripts/app.js')\nrequire('./stylesheets/app.scss')\n\n// check if HMR is enabled\nif (module.hot) {\n  module.hot.accept('./javascripts/app.js', () => { require('./javascripts/app.js') })\n}\n","import 'regenerator-runtime/runtime'\nimport Prism from 'prismjs'\nimport 'prismjs/components/prism-bash'\nimport 'prismjs/components/prism-go'\nimport 'prismjs/components/prism-markup'\nimport 'prismjs/components/prism-markup-templating'\nimport 'prismjs/components/prism-java'\nimport 'prismjs/components/prism-python'\nimport 'prismjs/components/prism-php'\nimport 'prismjs/components/prism-yaml'\nimport 'prismjs/components/prism-javascript'\nimport 'prismjs/components/prism-json'\nimport 'prismjs/components/prism-ruby'\nimport 'prismjs/components/prism-c' // can't use objectivec without c\nimport 'prismjs/components/prism-objectivec'\nimport 'prismjs/components/prism-swift'\n\nimport 'timeago/jquery.timeago.js'\nimport 'on-the-githubs/js/jquery.on-the-githubs.js'\nimport './upload-demo.js'\nimport './request-viewer.js'\n\n;($ => {\n  const Tus = {}\n\n  Tus.navToggler = () => {\n    const $toggler      = $('.header .toggler')\n    const $navContainer = $('.nav-container')\n    const toggleClass   = 'open'\n    $toggler.click(() => $navContainer.toggleClass(toggleClass))\n\n    return $(document).click(() => {\n      if (!$navContainer.hasClass(toggleClass)) {\n        return $navContainer.removeClass(toggleClass)\n      }\n    })\n  }\n\n  return $(document).ready(() => {\n    Tus.navToggler()\n    return $('.on-the-githubs').onthegithubs()\n  })\n})(jQuery)\n\nPrism.highlightAll()\n"],"sourceRoot":""}